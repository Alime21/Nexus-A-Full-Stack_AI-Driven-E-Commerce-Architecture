<svg viewBox="0 0 900 620" xmlns="http://www.w3.org/2000/svg" font-family="'Courier New', monospace">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0d1117"/>
      <stop offset="100%" style="stop-color:#161b22"/>
    </linearGradient>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1f6feb"/>
      <stop offset="100%" style="stop-color:#388bfd"/>
    </linearGradient>
    <linearGradient id="routerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a3a1a"/>
      <stop offset="100%" style="stop-color:#238636"/>
    </linearGradient>
    <linearGradient id="schemaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3a1a3a"/>
      <stop offset="100%" style="stop-color:#8957e5"/>
    </linearGradient>
    <linearGradient id="utilsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3a2a1a"/>
      <stop offset="100%" style="stop-color:#d29922"/>
    </linearGradient>
    <linearGradient id="crudGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a2a3a"/>
      <stop offset="100%" style="stop-color:#0077cc"/>
    </linearGradient>
    <linearGradient id="modelGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3a1a1a"/>
      <stop offset="100%" style="stop-color:#da3633"/>
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f2a1a"/>
      <stop offset="100%" style="stop-color:#1a4a2a"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="shadow">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000000" flood-opacity="0.5"/>
    </filter>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#388bfd"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#238636"/>
    </marker>
    <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#484f58"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#da3633"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="620" fill="url(#bgGrad)" rx="12"/>

  <!-- Border -->
  <rect width="900" height="620" fill="none" stroke="#30363d" stroke-width="1" rx="12"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="#e6edf3" font-size="16" font-weight="bold" letter-spacing="3">NEXUS — BACKEND ARCHITECTURE</text>
  <text x="450" y="56" text-anchor="middle" fill="#484f58" font-size="10" letter-spacing="2">N-TIER · FASTAPI · PYTHON 3.11</text>
  <line x1="60" y1="66" x2="840" y2="66" stroke="#21262d" stroke-width="1"/>

  <!-- ─────────────── CLIENT ─────────────── -->
  <rect x="330" y="82" width="240" height="54" rx="8" fill="url(#clientGrad)" filter="url(#shadow)"/>
  <text x="450" y="104" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="bold">CLIENT REQUEST</text>
  <text x="450" y="120" text-anchor="middle" fill="#cae8ff" font-size="9">iOS App  /  Web Admin  /  Postman</text>
  <text x="450" y="133" text-anchor="middle" fill="#79c0ff" font-size="8">POST /register  ·  POST /login  ·  GET /products</text>

  <!-- Arrow: Client → Router -->
  <line x1="450" y1="136" x2="450" y2="160" stroke="#388bfd" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowBlue)"/>
  <text x="460" y="151" fill="#388bfd" font-size="8">HTTP Request + JWT Header</text>

  <!-- ─────────────── LAYER 1: ROUTING ─────────────── -->
  <rect x="200" y="162" width="500" height="60" rx="8" fill="url(#routerGrad)" filter="url(#shadow)"/>
  <rect x="200" y="162" width="4" height="60" rx="2" fill="#238636"/>
  <text x="228" y="182" fill="#7ee787" font-size="9" font-weight="bold" letter-spacing="1">LAYER 1 — ROUTING</text>
  <text x="228" y="198" fill="#e6edf3" font-size="11" font-weight="bold">main.py</text>
  <text x="228" y="212" fill="#8b949e" font-size="9">Entry point · Defines endpoints · Routes traffic to correct handler · HTTP method resolution</text>
  <text x="660" y="198" fill="#238636" font-size="9" text-anchor="end">@app.post("/login")</text>
  <text x="660" y="211" fill="#238636" font-size="9" text-anchor="end">@app.get("/products")</text>

  <!-- Arrow: Router → Schema -->
  <line x1="450" y1="222" x2="450" y2="246" stroke="#8957e5" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowGray)"/>
  <text x="460" y="238" fill="#8957e5" font-size="8">Raw JSON Payload</text>

  <!-- ─────────────── LAYER 2: VALIDATION ─────────────── -->
  <rect x="200" y="248" width="500" height="60" rx="8" fill="url(#schemaGrad)" filter="url(#shadow)"/>
  <rect x="200" y="248" width="4" height="60" rx="2" fill="#8957e5"/>
  <text x="228" y="268" fill="#d2a8ff" font-size="9" font-weight="bold" letter-spacing="1">LAYER 2 — DATA VALIDATION</text>
  <text x="228" y="284" fill="#e6edf3" font-size="11" font-weight="bold">schemas.py  (Pydantic)</text>
  <text x="228" y="298" fill="#8b949e" font-size="9">Zero-Trust: validates email format, password length, types · Rejects invalid payloads → 422 before any DB call</text>
  <text x="660" y="284" fill="#8957e5" font-size="9" text-anchor="end">class UserCreate(BaseModel)</text>
  <text x="660" y="297" fill="#8957e5" font-size="9" text-anchor="end">email: EmailStr</text>

  <!-- Arrow: Schema → Utils (security branch) + CRUD (data branch) -->
  <line x1="340" y1="308" x2="260" y2="332" stroke="#d29922" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowGray)"/>
  <line x1="560" y1="308" x2="640" y2="332" stroke="#0077cc" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowGray)"/>

  <!-- ─────────────── LAYER 3: UTILS (left) ─────────────── -->
  <rect x="60" y="334" width="330" height="68" rx="8" fill="url(#utilsGrad)" filter="url(#shadow)"/>
  <rect x="60" y="334" width="4" height="68" rx="2" fill="#d29922"/>
  <text x="88" y="354" fill="#e3b341" font-size="9" font-weight="bold" letter-spacing="1">LAYER 3 — BUSINESS LOGIC &amp; SECURITY</text>
  <text x="88" y="370" fill="#e6edf3" font-size="11" font-weight="bold">utils.py  (JWT · Bcrypt)</text>
  <text x="88" y="384" fill="#8b949e" font-size="9">JWT generation &amp; validation · Password hashing (Bcrypt + salt)</text>
  <text x="88" y="396" fill="#8b949e" font-size="9">Irreversible hash · Token expiry management</text>

  <!-- ─────────────── LAYER 4: CRUD (right) ─────────────── -->
  <rect x="510" y="334" width="330" height="68" rx="8" fill="url(#crudGrad)" filter="url(#shadow)"/>
  <rect x="510" y="334" width="4" height="68" rx="2" fill="#0077cc"/>
  <text x="538" y="354" fill="#79c0ff" font-size="9" font-weight="bold" letter-spacing="1">LAYER 4 — DATA ACCESS LAYER</text>
  <text x="538" y="370" fill="#e6edf3" font-size="11" font-weight="bold">crud.py  (SQLAlchemy ORM)</text>
  <text x="538" y="384" fill="#8b949e" font-size="9">Only layer that touches DB · CREATE / READ / UPDATE / DELETE</text>
  <text x="538" y="396" fill="#8b949e" font-size="9">Isolates DB queries from routes · Reusable across endpoints</text>

  <!-- Arrow: CRUD → Models -->
  <line x1="675" y1="402" x2="675" y2="426" stroke="#da3633" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowRed)"/>

  <!-- ─────────────── LAYER 5: MODELS ─────────────── -->
  <rect x="510" y="428" width="330" height="60" rx="8" fill="url(#modelGrad)" filter="url(#shadow)"/>
  <rect x="510" y="428" width="4" height="60" rx="2" fill="#da3633"/>
  <text x="538" y="448" fill="#ffa198" font-size="9" font-weight="bold" letter-spacing="1">LAYER 5 — DATA MODELS</text>
  <text x="538" y="464" fill="#e6edf3" font-size="11" font-weight="bold">models.py  (SQLAlchemy)</text>
  <text x="538" y="478" fill="#8b949e" font-size="9">Defines PostgreSQL schema as Python classes · ORM mapping · Auto schema generation</text>

  <!-- Arrow: Models → DB -->
  <line x1="675" y1="488" x2="675" y2="512" stroke="#484f58" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowGray)"/>

  <!-- ─────────────── DATABASE LAYER ─────────────── -->
  <rect x="60" y="514" width="780" height="74" rx="8" fill="url(#dbGrad)" stroke="#238636" stroke-width="1" filter="url(#shadow)"/>
  <text x="450" y="534" text-anchor="middle" fill="#7ee787" font-size="9" font-weight="bold" letter-spacing="2">POLYGLOT PERSISTENCE LAYER</text>

  <!-- PostgreSQL -->
  <rect x="80" y="542" width="200" height="36" rx="6" fill="#0d2b4e" stroke="#1f6feb" stroke-width="1"/>
  <text x="180" y="558" text-anchor="middle" fill="#79c0ff" font-size="9" font-weight="bold">PostgreSQL</text>
  <text x="180" y="571" text-anchor="middle" fill="#484f58" font-size="8">Users · Orders · Order Items</text>

  <!-- MongoDB -->
  <rect x="300" y="542" width="180" height="36" rx="6" fill="#0d2b1a" stroke="#238636" stroke-width="1"/>
  <text x="390" y="558" text-anchor="middle" fill="#7ee787" font-size="9" font-weight="bold">MongoDB</text>
  <text x="390" y="571" text-anchor="middle" fill="#484f58" font-size="8">Product Catalog</text>

  <!-- Redis -->
  <rect x="500" y="542" width="160" height="36" rx="6" fill="#2b0d0d" stroke="#da3633" stroke-width="1"/>
  <text x="580" y="558" text-anchor="middle" fill="#ffa198" font-size="9" font-weight="bold">Redis</text>
  <text x="580" y="571" text-anchor="middle" fill="#484f58" font-size="8">Cart · Cache</text>

  <!-- Elasticsearch -->
  <rect x="680" y="542" width="140" height="36" rx="6" fill="#0d1f2b" stroke="#0077cc" stroke-width="1"/>
  <text x="750" y="558" text-anchor="middle" fill="#79c0ff" font-size="9" font-weight="bold">Elasticsearch</text>
  <text x="750" y="571" text-anchor="middle" fill="#484f58" font-size="8">Search</text>

  <!-- JWT badge -->
  <rect x="60" y="430" width="330" height="26" rx="6" fill="#21262d" stroke="#d29922" stroke-width="1"/>
  <text x="225" y="447" text-anchor="middle" fill="#e3b341" font-size="9">✓ JWT Token issued → returned to Client (stateless auth)</text>

  <!-- Response arrow back up -->
  <line x1="170" y1="430" x2="170" y2="200" stroke="#238636" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="170" y1="200" x2="330" y2="162" stroke="#238636" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowGreen)"/>
  <text x="90" y="320" fill="#238636" font-size="8" transform="rotate(-90, 90, 320)">JSON Response</text>

  <!-- Footer -->
  <line x1="60" y1="600" x2="840" y2="600" stroke="#21262d" stroke-width="1"/>
  <text x="450" y="614" text-anchor="middle" fill="#484f58" font-size="8" letter-spacing="1">NEXUS · FASTAPI + PYTHON 3.11 · ASGI · ASYNC I/O · JWT · PYDANTIC · SQLALCHEMY · BCRYPT</text>
</svg>
